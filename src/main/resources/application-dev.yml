# =======================================================
# í† ë§ˆí† ë¦¬ë©¤ë²„ ê°œë°œì„œë²„ í™˜ê²½ ì„¤ì • (JWT ì¸ì¦ ì‹œìŠ¤í…œ ì¶”ê°€)
# =======================================================

server:
  port: ${SERVER_PORT:8096}  # ê¸°ì¡´ ì„¤ì • ìœ ì§€
  servlet:
    session:
      cookie:
        secure: false

spring:
  # =======================================================
  # JPA ì„¤ì • (ê°œë°œì„œë²„ìš©)
  # =======================================================
  jpa:
    hibernate:
      ddl-auto: update  # ê¸°ì¡´ ì„¤ì • ìœ ì§€ (ìŠ¤í‚¤ë§ˆ ê²€ì¦ë§Œ)
    show-sql: false       # ê°œë°œì„œë²„ì—ì„œëŠ” SQL ë¡œê·¸ ë¹„í™œì„±í™”

  # =======================================================
  # ğŸ” JWT ë³´ì•ˆ ì„¤ì • (ê°œë°œì„œë²„ìš©)
  # =======================================================
  security:
    jwt:
      # ê°œë°œì„œë²„ìš© ì‹œí¬ë¦¿ í‚¤
      admin-secret: ZGV2QWRtaW5TZWNyZXRLZXlGb3JUb21hdG9SZW1lbWJlckFkbWluVG9rZW5HZW5lcmF0aW9uRGV2
      member-secret: ZGV2TWVtYmVyU2VjcmV0S2V5Rm9yVG9tYXRvUmVtZW1iZXJNZW1iZXJUb2tlbkdlbmVyYXRpb25EZXY=

      # ê°œë°œì„œë²„ìš© í† í° ë§Œë£Œ ì‹œê°„
      access-token-expiration: 7200000     # 2ì‹œê°„
      refresh-token-expiration: 604800000  # 1ì£¼
      auto-login-expiration: 2592000000    # 1ê°œì›”

      # ğŸª IP ì£¼ì†Œ í™˜ê²½ ìµœì í™” ì¿ í‚¤ ì„¤ì •
      cookie:
        secure: false           # HTTP ì‚¬ìš©
        same-site: Lax         # IP ì£¼ì†Œì—ì„œëŠ” Noneì´ ë” ì•ˆì „ (Lax ëŒ€ì‹ )
        domain: ""              # IP ì£¼ì†Œì—ì„œëŠ” domain ì„¤ì •í•˜ì§€ ì•ŠìŒ (ì¤‘ìš”!)
        path: /                 # ì „ì²´ ê²½ë¡œ
        http-only: true         # JavaScript ì ‘ê·¼ ì°¨ë‹¨ ìœ ì§€

  # =======================================================
  # ë°ì´í„°ì†ŒìŠ¤ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
  # =======================================================
  datasource:
#    url: ${DB_URL:jdbc:log4jdbc:mariadb://127.0.0.1:3306/tomato_remember}  # DBëª…ë§Œ ë³€ê²½
    url: ${DB_URL:jdbc:log4jdbc:mariadb://localhost:3307/remember}  # DBëª… ë³€ê²½
#    url: ${DB_URL:jdbc:log4jdbc:mariadb://114.31.52.64:3306/tomato_remember}
    driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy
#    username: ${DB_ID:aml60}
    username: ${DB_ID:root}
    password: ${DB_PW:root}
#    password: ${DB_PW:aml60}
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
      minimum-idle: 1
      connection-test-query: SELECT 1
      idle-timeout: 600000
      pool-name: ${spring.application.name}-pool

  # =======================================================
  # íŒŒì¼ ì—…ë¡œë“œ/í‘œì‹œ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
  # =======================================================
app:
  file:
    upload-dir: /home/nara/uploads/dev
    base-url: http://114.31.52.64:8096

# =======================================================
# ğŸ” í† ë§ˆí† ë¦¬ë©¤ë²„ ê°œë°œì„œë²„ ë³´ì•ˆ ì„¤ì •
# =======================================================
tomato-remember:
  security:
    # CORS ì„¤ì • (ê°œë°œì„œë²„ìš©)
    cors:
      allowed-origins:
        - http://114.31.52.64:8096
        - http://localhost:3000  # ë¡œì»¬ ê°œë°œ ì§€ì›
      allow-credentials: true

# =======================================================
# Google ì„œë¹„ìŠ¤ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
# =======================================================
google:
  key-path:
    console: /google/pc-api-6501066511374588335-380-1ad7a0f489f4.json
    firebase: /firebase/dev-bread-4908a-firebase-adminsdk-cp247-2bc9dd1010.json

# =======================================================
# ê°œë°œì„œë²„ ë¡œê¹… ì„¤ì • (JWT ì¸ì¦ ë¡œê¹… ì¶”ê°€)
# =======================================================
logging:
  level:
    com.tomato.remember: INFO
    org.springframework.web: INFO
    org.springframework.security: INFO
    # JWT ì¸ì¦ ê´€ë ¨ ë¡œê¹… (ê°œë°œì„œë²„ì—ì„œëŠ” ì¤‘ê°„ ë ˆë²¨)
    com.tomato.remember.common.security: DEBUG
    com.tomato.remember.common.util.CookieUtil: DEBUG
    org.thymeleaf: DEBUG
    org.springframework.web.servlet.view: DEBUG

# =======================================================
# ê°œë°œì„œë²„ìš© JWT ì„¤ì •
# =======================================================
debug:
  jwt:
    enabled: false  # ê°œë°œì„œë²„ì—ì„œëŠ” JWT ë””ë²„ê¹… ë¹„í™œì„±í™”
    print-claims: false
    print-headers: false
# =======================================================
# ìŠ¤ì›¨ê±° í™˜ê²½ë³„ ì„¤ì •
# =======================================================
springdoc:
  swagger-ui:
    enabled: true
    # ë¡œì»¬ ê°œë°œ ì‹œ ì¶”ê°€ ì„¤ì •
    deep-linking: true
    display-operation-id: true
    show-extensions: true