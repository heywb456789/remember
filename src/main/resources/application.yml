# =======================================================
# í† ë§ˆí† ë¦¬ë©¤ë²„ ê¸°ë³¸ ì„¤ì • íŒŒì¼
# =======================================================

spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  application:
    name: remember

  output:
    ansi:
      enabled: always

  main:
    banner-mode: off
  # =======================================================
  # ë©”ì¼ 
  # =======================================================
  mail:
    host: smtp.gmail.com
    port: 465
    username: remeber.noreply@gmail.com
    password: rrvm jctp htkp kdss
    protocol: smtp
    test-connection: false
    default-encoding: UTF-8
    properties:
      mail:
        smtp:
          auth: true
          #  465 í¬íŠ¸ëŠ” SSL ì „ìš© í¬íŠ¸
          ssl:
            enable: true
            trust: smtp.gmail.com
          #  STARTTLSëŠ” 465 í¬íŠ¸ì—ì„œ ë¹„í™œì„±í™”
          starttls:
            enable: false
            required: false
          #  SSL ì†Œì¼“ íŒ©í† ë¦¬ ì„¤ì • (465 í¬íŠ¸ í•„ìˆ˜)
          socketFactory:
            class: javax.net.ssl.SSLSocketFactory
            port: 465
            fallback: false
          #  íƒ€ì„ì•„ì›ƒ ì„¤ì •
          connectiontimeout: 60000
          timeout: 60000
          writetimeout: 60000
          #  ì¶”ê°€ ì„¤ì •
          quitwait: false
          #  EHLO ì„¤ì • ì œê±° (í‘œì¤€ JavaMailì—ì„œ ì§€ì›í•˜ì§€ ì•ŠìŒ)
          # ehlo: false  # ì´ ì„¤ì •ì€ ì œê±°
        debug: false
        transport:
          protocol: smtp

    from: remeber.noreply@gmail.com
    name: í† ë§ˆí† ë¦¬ë©¤ë²„
    domain: http://localhost:8080  #  localhost í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •
  # =======================================================
  # JPA ì„¤ì •
  # =======================================================
  jpa:
    database: mysql
    open-in-view: true
    show-sql: ${SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MariaDBDialect
        format_sql: true
        use_sql_comments: true

  # =======================================================
  # MVC ì„¤ì •
  # =======================================================
  mvc:
    format:
      date: yyyy-MM-dd
      date-time: yyyy-MM-dd HH:mm:ss
      time: HH:mm:ss

  # =======================================================
  # Thymeleaf ì„¤ì •
  # =======================================================
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    cache: ${THYMELEAF_CACHE:false}

  # =======================================================
  # ì •ì  ë¦¬ì†ŒìŠ¤ ì„¤ì •
  # =======================================================
  web:
    resources:
      cache:
        period: ${RESOURCE_CACHE_PERIOD:0}

  # =======================================================
  # íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •
  # =======================================================
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB

  # =======================================================
  # JWT ë³´ì•ˆ ì„¤ì •
  # =======================================================
  security:
    jwt:
      # ê´€ë¦¬ì JWT ì„¤ì •
      admin-secret: ${JWT_ADMIN_SECRET:YWRtaW5TZWNyZXRLZXlGb3JUb21hdG9SZW1lbWJlckFkbWluVG9rZW5Hzb250}
      # íšŒì› JWT ì„¤ì •
      member-secret: ${JWT_MEMBER_SECRET:bWVtYmVyU2VjcmV0S2V5Rm9yVG9tYXRvUmVtZW1iZXJNZW1iZXJUb2tlbkdlbmVy}

      # í† í° ë§Œë£Œ ì‹œê°„ ì„¤ì •
      access-token-expiration: ${JWT_ACCESS_EXPIRATION:3600000}        # 1ì‹œê°„
      refresh-token-expiration: ${JWT_REFRESH_EXPIRATION:1209600000}   # 2ì£¼
      auto-login-expiration: ${JWT_AUTO_LOGIN_EXPIRATION:31536000000}  # 1ë…„

      # ğŸª JWT ì¿ í‚¤ ì„¤ì • (CookieUtilê³¼ ì¼ì¹˜í•˜ë„ë¡ ë‹¨ìˆœí™”)
      cookie:
        secure: ${JWT_COOKIE_SECURE:true}          # ê¸°ë³¸ê°’: HTTPS í•„ìš”
        http-only: ${JWT_COOKIE_HTTP_ONLY:true}    # ê¸°ë³¸ê°’: JavaScript ì ‘ê·¼ ì°¨ë‹¨
        same-site: ${JWT_COOKIE_SAME_SITE:Strict}  # ê¸°ë³¸ê°’: CSRF ë°©ì§€ ê°•í™”
        path: ${JWT_COOKIE_PATH:/}                 # ê¸°ë³¸ê°’: ì „ì²´ ê²½ë¡œ
        domain: ${JWT_COOKIE_DOMAIN:}              # ê¸°ë³¸ê°’: í˜„ì¬ ë„ë©”ì¸ (ë¹ˆ ê°’)

  # =======================================================
  # ê°œë°œíˆ´ ì„¤ì •
  # =======================================================
  devtools:
    livereload:
      enabled: ${DEVTOOLS_ENABLED:true}

# =======================================================
# í† ë§ˆí† ë¦¬ë©¤ë²„ ë³´ì•ˆ ì„¤ì •
# =======================================================
tomato-remember:
  security:
    # JWT í•„í„° ìˆœì„œ ì„¤ì •
    filter-order:
      admin-api: 1
      mobile-view: 2
      api: 3

    # ì¸ì¦ ì œì™¸ ê²½ë¡œ ì„¤ì •
    permit-all-patterns:
      - /
      - /home
      - /about
      - /contact
      - /mobile/login
      - /mobile/register
      - /mobile/auth/**
      - /mobile/public/**
      - /admin/view/login
      - /admin/view/register
      - /admin/api/auth/login
      - /admin/api/auth/refresh
      - /api/auth/login
      - /api/auth/register
      - /api/auth/refresh
      - /api/memorial/public/**
      - /api/videos/public/**
      - /api/news/public/**
      - /api/share/**
      - /uploads/**
      - /css/**
      - /js/**
      - /images/**
      - /favicon.ico
      - /actuator/health
      - /v3/api-docs/**
      - /swagger-ui/**
      - /swagger-ui.html

    # CORS ì„¤ì •
    cors:
      allowed-origins:
        - ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080,https://remember.newstomato.com}
      allowed-methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS
        - PATCH
      allowed-headers:
        - "*"
      allow-credentials: true
      max-age: 3600

# =======================================================
# SpringDoc OpenAPI 2.6.0 ë²„ì „ ì„¤ì •
# =======================================================
springdoc:
  swagger-ui:
    enabled: ${SWAGGER_ENABLED:true}
    path: /swagger-ui.html
    url: /v3/api-docs

    # PetStore ì˜ˆì‹œ ë¹„í™œì„±í™”
    disable-swagger-default-url: true

    # ê·¸ë£¹ ë° ì •ë ¬ ì„¤ì •
    groups-order: ASC
    tags-sorter: alpha
    operations-sorter: alpha

    # UI ê¸°ëŠ¥ ì„¤ì •
    try-it-out-enabled: true
    filter: true
    display-request-duration: true
    display-operation-id: false
    show-extensions: false
    show-common-extensions: false

    # ëª¨ë¸ í™•ì¥ ì„¤ì •
    default-models-expand-depth: 2
    default-model-expand-depth: 2
    default-model-rendering: example

    # OAuth2 ë° ì¸ì¦ ì„¤ì •
    config-url: /v3/api-docs/swagger-config
    oauth2-redirect-url: /swagger-ui/oauth2-redirect.html

    # ì§€ì†ì„± ì„¤ì • (í† í° ìœ ì§€)
    persist-authorization: true

    # í† ë§ˆí† ë¦¬ë©¤ë²„ ë¸Œëœë“œ ì»¤ìŠ¤í…€ CSS
    custom-css: |
      /* í† ë§ˆí† ë¦¬ë©¤ë²„ ë¸Œëœë”© */
      .swagger-ui .topbar { 
        background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
        border-bottom: 2px solid #ff8c42;
        box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
      }
      
      .swagger-ui .topbar .download-url-wrapper { 
        display: none; 
      }
      
      .swagger-ui .topbar .link {
        color: white;
        font-weight: 600;
      }
      
      /* ì œëª© ë° ì •ë³´ ìŠ¤íƒ€ì¼ë§ */
      .swagger-ui .info .title { 
        color: #2d3436; 
        font-weight: 700;
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }
      
      .swagger-ui .info .description {
        color: #636e72;
        line-height: 1.6;
      }
      
      /* ì¸ì¦ ë²„íŠ¼ ìŠ¤íƒ€ì¼ë§ */
      .swagger-ui .scheme-container { 
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border: 1px solid #dee2e6;
        padding: 20px; 
        border-radius: 12px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      
      .swagger-ui .auth-wrapper { 
        display: flex; 
        justify-content: flex-end; 
        align-items: center;
        margin: 15px 0;
        gap: 10px;
      }
      
      .swagger-ui .btn.authorize { 
        background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        border: none;
        border-radius: 8px;
        color: white;
        font-weight: 600;
        padding: 10px 20px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 184, 148, 0.3);
      }
      
      .swagger-ui .btn.authorize:hover {
        background: linear-gradient(135deg, #00a085 0%, #008f75 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 184, 148, 0.4);
      }
      
      .swagger-ui .btn.authorize svg {
        margin-right: 8px;
      }
      
      /* ê·¸ë£¹ íƒ­ ìŠ¤íƒ€ì¼ë§ */
      .swagger-ui .tab {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px 8px 0 0;
        padding: 12px 20px;
        margin-right: 4px;
        transition: all 0.3s ease;
      }
      
      .swagger-ui .tab.active {
        background: white;
        border-bottom: 1px solid white;
        color: #ff6b35;
        font-weight: 600;
      }
      
      /* ì‘ì—… íƒœê·¸ ìŠ¤íƒ€ì¼ë§ */
      .swagger-ui .opblock-tag {
        background: linear-gradient(135deg, #f1f3f4 0%, #e8eaed 100%);
        border: 1px solid #dadce0;
        border-radius: 8px;
        margin: 10px 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .swagger-ui .opblock-tag-section h3 {
        color: #3c4043;
        font-weight: 600;
        padding: 15px 20px;
      }
      
      /* HTTP ë©”ì„œë“œë³„ ìƒ‰ìƒ */
      .swagger-ui .opblock.opblock-get .opblock-summary {
        border-color: #61affe;
        background: rgba(97, 175, 254, 0.1);
      }
      
      .swagger-ui .opblock.opblock-post .opblock-summary {
        border-color: #49cc90;
        background: rgba(73, 204, 144, 0.1);
      }
      
      .swagger-ui .opblock.opblock-put .opblock-summary {
        border-color: #fca130;
        background: rgba(252, 161, 48, 0.1);
      }
      
      .swagger-ui .opblock.opblock-delete .opblock-summary {
        border-color: #f93e3e;
        background: rgba(249, 62, 62, 0.1);
      }
      
      /* ì‘ë‹µ ì½”ë“œ ìŠ¤íƒ€ì¼ë§ */
      .swagger-ui .responses-inner h4,
      .swagger-ui .responses-inner h5 {
        color: #3c4043;
        font-weight: 600;
      }
      
      .swagger-ui .response-col_status {
        font-weight: 600;
      }
      
      /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
      .swagger-ui ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      
      .swagger-ui ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }
      
      .swagger-ui ::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }
      
      .swagger-ui ::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }
      
      /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
      @media (max-width: 768px) {
        .swagger-ui .info .title {
          font-size: 1.5rem;
        }
        
        .swagger-ui .scheme-container {
          padding: 15px;
          margin: 15px 0;
        }
        
        .swagger-ui .auth-wrapper {
          justify-content: center;
        }
      }

  api-docs:
    enabled: true
    path: /v3/api-docs

    # ê·¸ë£¹ ì„¤ì •
    groups:
      enabled: true

  # ì „ì—­ ì„¤ì •
  packages-to-scan: com.tomato.remember
  paths-to-match: /api/**,/admin/api/**

  # PetStore ë° ê¸°ë³¸ ì˜ˆì‹œ ì œê±°
  paths-to-exclude: /swagger-resources/**,/swagger-ui/**,/v2/**,/webjars/**

  # ì‘ë‹µ ì„¤ì •
  default-consumes-media-type: application/json
  default-produces-media-type: application/json

  # ëª¨ë¸ ì„¤ì •
  model-and-view-allowed: true
  override-with-generic-response: false

  # ìºì‹œ ì„¤ì •
  cache:
    disabled: false

  # ì¶”ê°€ ì„¤ì •
  show-actuator: false
  auto-tag-classes: true

  # ì›¹ MVC ì„¤ì •
  webjars:
    prefix: /webjars

  # ì‚¬ìš©ì ì •ì˜ ì„¤ì •
  use-management-port: false
  pre-loading-enabled: false

# =======================================================
# í† ë§ˆí†  ONE-ID ì„¤ì • (ê¸°ì¡´ ì„¤ì • ì •ë¦¬)
# =======================================================
one-id:
  base-url: https://api.otongtong.net
  nation: KR
  app-type: ${ONE_ID_APP_TYPE:newstong}
  endpoints:
    login: /v1/api/external/PASSTONG/plain/login
    send-sms-cert: /v1/api/external/{apptype}/join/certi
    verify-sms-cert: /v1/api/external/{apptype}/join/certicheck
    register: /v1/api/external/{apptype}/join
    coin-info: /v1/api/external/{apptype}/coin-info
    profile-img: /v1/api/external/{apptype}/profile/img/upload/{userkey}
##################íŒŒì¼ Default
app:
  file:
    upload-dir: /uploads
    base-url: http://192.168.20.22:8080
    url-pattern: /uploads/**    # ì›¹ ì ‘ê·¼ URL ê²½ë¡œ