# =======================================================
# í† ë§ˆí† ë¦¬ë©¤ë²„ ìš´ì˜í™˜ê²½ ì„¤ì • (JWT ì¸ì¦ ì‹œìŠ¤í…œ ì¶”ê°€)
# =======================================================

server:
  port: ${SERVER_PORT:8032}  # ê¸°ì¡´ ì„¤ì • ìœ ì§€

spring:
  # =======================================================
  # JPA ì„¤ì • (ìš´ì˜ìš©)
  # =======================================================
  jpa:
    hibernate:
      ddl-auto: validate  # ê¸°ì¡´ ì„¤ì • ìœ ì§€ (ìš´ì˜ì—ì„œëŠ” ìŠ¤í‚¤ë§ˆ ë³€ê²½ ê¸ˆì§€)
    show-sql: false       # ìš´ì˜í™˜ê²½ì—ì„œëŠ” SQL ë¡œê·¸ ë¹„í™œì„±í™”

  # =======================================================
  # ğŸ” JWT ë³´ì•ˆ ì„¤ì • (ìš´ì˜ìš© - ìµœê³  ë³´ì•ˆ ë ˆë²¨)
  # =======================================================
  security:
    jwt:
      # ìš´ì˜í™˜ê²½ìš© ê°•ë ¥í•œ ì‹œí¬ë¦¿ í‚¤ (í™˜ê²½ë³€ìˆ˜ì—ì„œ ì£¼ì… ê¶Œì¥)
      admin-secret: ${JWT_ADMIN_SECRET_PROD:cHJvZEFkbWluU2VjcmV0S2V5Rm9yVG9tYXRvUmVtZW1iZXJBZG1pblRva2VuR2VuZXJhdGlvblByb2Q=}
      member-secret: ${JWT_MEMBER_SECRET_PROD:cHJvZE1lbWJlclNlY3JldEtleUZvclRvbWF0b1JlbWVtYmVyTWVtYmVyVG9rZW5HZW5lcmF0aW9uUHJvZA==}

      # ìš´ì˜í™˜ê²½ìš© í† í° ë§Œë£Œ ì‹œê°„ (ë³´ì•ˆ ê°•í™”)
      access-token-expiration: 1800000     # 30ë¶„ (ìš´ì˜ìš© - ë³´ì•ˆ ê°•í™”)
      refresh-token-expiration: 1209600000 # 2ì£¼ (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
      auto-login-expiration: 31536000000   # 1ë…„ (ê¸°ì¡´ ì„¤ì • ìœ ì§€)

      # ğŸª ìš´ì˜í™˜ê²½ìš© ì¿ í‚¤ ì„¤ì • (ìµœê³  ë³´ì•ˆ)
      cookie:
        member:
          domain: .newstomato.com  # ìš´ì˜ ë„ë©”ì¸
          secure: true             # HTTPS í•„ìˆ˜
          same-site: Strict        # ìµœê³  ë³´ì•ˆ ë ˆë²¨
          max-age: 31536000        # 1ë…„
        admin:
          domain: .newstomato.com
          secure: true             # HTTPS í•„ìˆ˜
          same-site: Strict        # ìµœê³  ë³´ì•ˆ ë ˆë²¨
          max-age: 31536000

  # =======================================================
  # ë°ì´í„°ì†ŒìŠ¤ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
  # =======================================================
  datasource:
    url: ${DB_URL:jdbc:log4jdbc:mariadb://192.168.10.12:3306/tomato_remember}  # DBëª…ë§Œ ë³€ê²½
    driver-class-name: net.sf.log4jdbc.sql.jdbcapi.DriverSpy
    username: ${DB_ID:root}
    password: ${DB_PW:tomato0425@!}
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
      minimum-idle: 1
      connection-test-query: SELECT 1
      idle-timeout: 600000
      pool-name: ${spring.application.name}-pool

  # =======================================================
  # íŒŒì¼ ì—…ë¡œë“œ/í‘œì‹œ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
  # =======================================================
  app:
    display: https://image.newstomato.com/newstomato/club
    upload:
      root: /test
      ftp:
        host: 1.201.174.63
        port: 21
        user: tomatochain
        password: tomatochain1!

# =======================================================
# ğŸ” í† ë§ˆí† ë¦¬ë©¤ë²„ ìš´ì˜í™˜ê²½ ë³´ì•ˆ ì„¤ì • (ìµœê³  ë³´ì•ˆ)
# =======================================================
tomato-remember:
  security:
    # CORS ì„¤ì • (ìš´ì˜í™˜ê²½ìš© - ì œí•œì )
    cors:
      allowed-origins:
        - https://remember.newstomato.com
        - https://club1.newstomato.com
        # ìš´ì˜í™˜ê²½ì—ì„œëŠ” HTTPSë§Œ í—ˆìš©
      allow-credentials: true
      max-age: 86400  # 24ì‹œê°„ ìºì‹œ

    # ìš´ì˜í™˜ê²½ ë³´ì•ˆ ê°•í™” ì„¤ì •
    rate-limit:
      enabled: true
      requests-per-minute: 100
      burst-capacity: 200

    # IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ (í•„ìš”ì‹œ)
    ip-whitelist:
      enabled: false  # í•„ìš”ì‹œ í™œì„±í™”
      allowed-ips: []

# =======================================================
# NICE ë³¸ì¸ì¸ì¦ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
# =======================================================
nice:
  call-back: https://club1.newstomato.com/api/auth/pass/callback

# =======================================================
# ë³µì œ ì„¤ì • (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
# =======================================================
original:
  replication: true

# =======================================================
# ìš´ì˜í™˜ê²½ ë¡œê¹… ì„¤ì • (ë³´ì•ˆ ë¡œê·¸ ê°•í™”)
# =======================================================
logging:
  level:
    com.tomato.remember: INFO
    org.springframework.web: WARN
    org.springframework.security: WARN
    # JWT ì¸ì¦ ê´€ë ¨ ë¡œê¹… (ìš´ì˜ì—ì„œëŠ” ìµœì†Œí™”)
    com.tomato.remember.common.security: INFO
    com.tomato.remember.common.util.CookieUtil: WARN
    # ë³´ì•ˆ ì´ë²¤íŠ¸ë§Œ ê¸°ë¡
    com.tomato.remember.common.security.filter: WARN

  # ìš´ì˜í™˜ê²½ ë¡œê·¸ ì„¤ì •
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{50}] - %msg%n"

  file:
    name: /logs/tomato-remember-prod.log
    max-size: 100MB
    max-history: 30

# =======================================================
# ìš´ì˜í™˜ê²½ JWT ì„¤ì • (ë³´ì•ˆ ê°•í™”)
# =======================================================
debug:
  jwt:
    enabled: false  # ìš´ì˜ì—ì„œëŠ” JWT ë””ë²„ê¹… ì™„ì „ ë¹„í™œì„±í™”
    print-claims: false
    print-headers: false

# =======================================================
# ìš´ì˜í™˜ê²½ ëª¨ë‹ˆí„°ë§ ì„¤ì •
# =======================================================
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
      base-path: /actuator
  endpoint:
    health:
      show-details: never  # ìš´ì˜í™˜ê²½ì—ì„œëŠ” ìƒì„¸ ì •ë³´ ìˆ¨ê¹€
  security:
    enabled: true

# =======================================================
# ìš´ì˜í™˜ê²½ SSL/TLS ì„¤ì • (í•„ìš”ì‹œ)
# =======================================================
# server:
#   ssl:
#     enabled: true
#     key-store: classpath:keystore.p12
#     key-store-password: ${SSL_KEYSTORE_PASSWORD}
#     key-store-type: PKCS12
#     key-alias: tomato-remember