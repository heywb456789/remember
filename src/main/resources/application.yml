# =======================================================
# í† ë§ˆí† ë¦¬ë©¤ë²„ ê¸°ë³¸ ì„¤ì • íŒŒì¼
# =======================================================

spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  application:
    name: remember

  output:
    ansi:
      enabled: always

  main:
    banner-mode: off
  # =======================================================
  # ë©”ì¼ 
  # =======================================================
  mail:
    host: smtp.gmail.com
    port: 465
    username: remeber.noreply@gmail.com
    password: rrvm jctp htkp kdss
    protocol: smtp
    test-connection: false
    default-encoding: UTF-8
    properties:
      mail:
        smtp:
          auth: true
          #  465 í¬íŠ¸ëŠ” SSL ì „ìš© í¬íŠ¸
          ssl:
            enable: true
            trust: smtp.gmail.com
          #  STARTTLSëŠ” 465 í¬íŠ¸ì—ì„œ ë¹„í™œì„±í™”
          starttls:
            enable: false
            required: false
          #  SSL ì†Œì¼“ íŒ©í† ë¦¬ ì„¤ì • (465 í¬íŠ¸ í•„ìˆ˜)
          socketFactory:
            class: javax.net.ssl.SSLSocketFactory
            port: 465
            fallback: false
          #  íƒ€ì„ì•„ì›ƒ ì„¤ì •
          connectiontimeout: 60000
          timeout: 60000
          writetimeout: 60000
          #  ì¶”ê°€ ì„¤ì •
          quitwait: false
          #  EHLO ì„¤ì • ì œê±° (í‘œì¤€ JavaMailì—ì„œ ì§€ì›í•˜ì§€ ì•ŠìŒ)
          # ehlo: false  # ì´ ì„¤ì •ì€ ì œê±°
        debug: false
        transport:
          protocol: smtp

    from: remeber.noreply@gmail.com
    name: í† ë§ˆí† ë¦¬ë©¤ë²„
    domain: http://localhost:8080  #  localhost í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •
  # =======================================================
  # JPA ì„¤ì •
  # =======================================================
  jpa:
    database: mysql
    open-in-view: true
    show-sql: ${SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MariaDBDialect
        format_sql: true
        use_sql_comments: true

  # =======================================================
  # MVC ì„¤ì •
  # =======================================================
  mvc:
    format:
      date: yyyy-MM-dd
      date-time: yyyy-MM-dd HH:mm:ss
      time: HH:mm:ss

  # =======================================================
  # Thymeleaf ì„¤ì •
  # =======================================================
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    cache: ${THYMELEAF_CACHE:false}

  # =======================================================
  # ì •ì  ë¦¬ì†ŒìŠ¤ ì„¤ì •
  # =======================================================
  web:
    resources:
      cache:
        period: ${RESOURCE_CACHE_PERIOD:0}

  # =======================================================
  # íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •
  # =======================================================
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB

  # =======================================================
  # JWT ë³´ì•ˆ ì„¤ì •
  # =======================================================
  security:
    jwt:
      # ê´€ë¦¬ì JWT ì„¤ì •
      admin-secret: ${JWT_ADMIN_SECRET:YWRtaW5TZWNyZXRLZXlGb3JUb21hdG9SZW1lbWJlckFkbWluVG9rZW5Hzb250}
      # íšŒì› JWT ì„¤ì •
      member-secret: ${JWT_MEMBER_SECRET:bWVtYmVyU2VjcmV0S2V5Rm9yVG9tYXRvUmVtZW1iZXJNZW1iZXJUb2tlbkdlbmVy}

      # í† í° ë§Œë£Œ ì‹œê°„ ì„¤ì •
      access-token-expiration: ${JWT_ACCESS_EXPIRATION:3600000}        # 1ì‹œê°„
      refresh-token-expiration: ${JWT_REFRESH_EXPIRATION:1209600000}   # 2ì£¼
      auto-login-expiration: ${JWT_AUTO_LOGIN_EXPIRATION:31536000000}  # 1ë…„

      # ğŸª JWT ì¿ í‚¤ ì„¤ì • (CookieUtilê³¼ ì¼ì¹˜í•˜ë„ë¡ ë‹¨ìˆœí™”)
      cookie:
        secure: ${JWT_COOKIE_SECURE:true}          # ê¸°ë³¸ê°’: HTTPS í•„ìš”
        http-only: ${JWT_COOKIE_HTTP_ONLY:true}    # ê¸°ë³¸ê°’: JavaScript ì ‘ê·¼ ì°¨ë‹¨
        same-site: ${JWT_COOKIE_SAME_SITE:Strict}  # ê¸°ë³¸ê°’: CSRF ë°©ì§€ ê°•í™”
        path: ${JWT_COOKIE_PATH:/}                 # ê¸°ë³¸ê°’: ì „ì²´ ê²½ë¡œ
        domain: ${JWT_COOKIE_DOMAIN:}              # ê¸°ë³¸ê°’: í˜„ì¬ ë„ë©”ì¸ (ë¹ˆ ê°’)

  # =======================================================
  # ê°œë°œíˆ´ ì„¤ì •
  # =======================================================
  devtools:
    livereload:
      enabled: ${DEVTOOLS_ENABLED:true}

# =======================================================
# SpringDoc OpenAPI 2.6.0 ë²„ì „ ì„¤ì •
# =======================================================
springdoc:
  swagger-ui:
    enabled: ${SWAGGER_ENABLED:true}
    path: /swagger-ui.html
    url: /v3/api-docs

    # PetStore ì˜ˆì‹œ ë¹„í™œì„±í™”
    disable-swagger-default-url: true

    # ê·¸ë£¹ ë° ì •ë ¬ ì„¤ì •
    groups-order: ASC
    tags-sorter: alpha
    operations-sorter: alpha

    # UI ê¸°ëŠ¥ ì„¤ì •
    try-it-out-enabled: true
    filter: true
    display-request-duration: true
    display-operation-id: false
    show-extensions: false
    show-common-extensions: false

    # ëª¨ë¸ í™•ì¥ ì„¤ì •
    default-models-expand-depth: 2
    default-model-expand-depth: 2
    default-model-rendering: example

    # OAuth2 ë° ì¸ì¦ ì„¤ì •
    config-url: /v3/api-docs/swagger-config
    oauth2-redirect-url: /swagger-ui/oauth2-redirect.html

    # ì§€ì†ì„± ì„¤ì • (í† í° ìœ ì§€)
    persist-authorization: true

  api-docs:
    enabled: true
    path: /v3/api-docs

    # ê·¸ë£¹ ì„¤ì •
    groups:
      enabled: true

  # ì „ì—­ ì„¤ì •
  packages-to-scan: com.tomato.remember
  paths-to-match: /api/**,/admin/api/**

  # PetStore ë° ê¸°ë³¸ ì˜ˆì‹œ ì œê±°
  paths-to-exclude: /swagger-resources/**,/swagger-ui/**,/v2/**,/webjars/**

  # ì‘ë‹µ ì„¤ì •
  default-consumes-media-type: application/json
  default-produces-media-type: application/json

  # ëª¨ë¸ ì„¤ì •
  model-and-view-allowed: true
  override-with-generic-response: false

  # ìºì‹œ ì„¤ì •
  cache:
    disabled: false

  # ì¶”ê°€ ì„¤ì •
  show-actuator: false
  auto-tag-classes: true

  # ì›¹ MVC ì„¤ì •
  webjars:
    prefix: /webjars

  # ì‚¬ìš©ì ì •ì˜ ì„¤ì •
  use-management-port: false
  pre-loading-enabled: false

# =======================================================
# í† ë§ˆí†  ONE-ID ì„¤ì • (ê¸°ì¡´ ì„¤ì • ì •ë¦¬)
# =======================================================
one-id:
  base-url: https://api.otongtong.net
  nation: KR
  app-type: ${ONE_ID_APP_TYPE:newstong}
  endpoints:
    login: /v1/api/external/PASSTONG/plain/login
    send-sms-cert: /v1/api/external/{apptype}/join/certi
    verify-sms-cert: /v1/api/external/{apptype}/join/certicheck
    register: /v1/api/external/{apptype}/join
    coin-info: /v1/api/external/{apptype}/coin-info
    profile-img: /v1/api/external/{apptype}/profile/img/upload/{userkey}
    password-reset-cert: /v1/api/external/{0}/changepasswd/certi
    password-reset-verify: /v1/api/external/{0}/changepasswd/certicheck
    password-reset: /v1/api/external/{0}/changepasswd/reset
##################íŒŒì¼ Default
app:
  file:
    upload-dir: /uploads
    base-url: http://192.168.20.22:8080
    url-pattern: /uploads/**    # ì›¹ ì ‘ê·¼ URL ê²½ë¡œ
  memorial-video:
    session:
      ttl-seconds: 3600
    heartbeat:
      interval-seconds: 30
    reconnect:
      max-attempts: 10