<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>가족 메모리얼 초대</title>
</head>
<body style="margin: 0; padding: 0; font-family: '맑은 고딕', 'Malgun Gothic', Arial, sans-serif; background-color: #f8f9fa;">

    <!-- 외부 컨테이너 -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f8f9fa; padding: 20px 0;">
        <tr>
            <td align="center">

                <!-- 메인 컨테이너 -->
                <table width="600" cellpadding="0" cellspacing="0" border="0" style="max-width: 600px; background-color: #ffffff; border: 1px solid #e9ecef;">

                    <!-- 헤더 -->
                    <tr>
                        <td style="background-color: #667eea; color: white; padding: 32px 24px; text-align: center;">
                            <h1 style="margin: 0; font-size: 24px; font-weight: bold;" th:text="${appName}">토마토리멤버</h1>
                            <p style="margin: 8px 0 0 0; font-size: 16px;">소중한 추억을 영원히 간직하세요</p>
                        </td>
                    </tr>

                    <!-- 메인 콘텐츠 -->
                    <tr>
                        <td style="padding: 32px 24px;">

                            <!-- 초대 카드 -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f8f9fa; border-left: 4px solid #28a745; margin-bottom: 24px;">
                                <tr>
                                    <td style="padding: 24px;">

                                        <!-- 메모리얼 정보 -->
                                        <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 20px;">
                                            <tr>
                                                <td>
                                                    <h3 style="margin: 0 0 8px 0; font-size: 20px; font-weight: bold; color: #333;">
                                                        <span th:text="${deceasedNickname}">별명</span>
                                                        <span th:if="${deceasedName != null and !#strings.isEmpty(deceasedName) and deceasedName != deceasedNickname}">
                                                            (<span th:text="${deceasedName}">이름</span>)
                                                        </span>
                                                    </h3>
                                                    <p style="margin: 0; font-size: 14px; color: #666;">메모리얼에 초대되었습니다</p>
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- 초대자 정보 -->
                                        <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 20px;">
                                            <tr>
                                                <td>
                                                    <p style="margin: 0; font-size: 16px; color: #333;">
                                                        <strong th:text="${inviterName}">초대자</strong>님이
                                                        <span style="background-color: #28a745; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: bold;" th:text="${relationshipDisplayName}">관계</span>
                                                        관계로 초대했습니다
                                                    </p>
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- 초대 메시지 -->
                                        <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 20px;" th:if="${inviteMessage != null and !#strings.isEmpty(inviteMessage)}">
                                            <tr>
                                                <td style="background-color: #fff; border: 1px solid #e9ecef; padding: 16px;">
                                                    <p style="margin: 0; font-size: 14px; color: #555; font-style: italic;" th:text="${inviteMessage}">초대 메시지</p>
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- 초대 수락 버튼 -->
                                        <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                            <tr>
                                                <td align="center" style="padding: 32px 0;">
                                                    <a th:href="${inviteLink}" style="background-color: #28a745; color: white; text-decoration: none; padding: 16px 32px; font-size: 16px; font-weight: bold; border-radius: 4px; display: inline-block;">
                                                        초대 수락하기
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>

                                    </td>
                                </tr>
                            </table>

                            <!-- 만료 정보 -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #fff3cd; border-left: 4px solid #ffc107; margin-bottom: 24px;">
                                <tr>
                                    <td style="padding: 16px;">
                                        <h4 style="margin: 0 0 8px 0; font-size: 14px; font-weight: bold; color: #856404;">⏰ 초대 만료 안내</h4>
                                        <p style="margin: 0; font-size: 13px; color: #856404;">
                                            이 초대는 <strong th:text="${expiresAt}">만료일</strong>에 만료됩니다.
                                            <br>
                                            (남은 시간: <strong th:text="${remainingHours}">시간</strong>시간)
                                        </p>
                                    </td>
                                </tr>
                            </table>

                            <!-- 구분선 -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
                                <tr>
                                    <td style="border-bottom: 1px solid #e9ecef;"></td>
                                </tr>
                            </table>

                            <!-- 서비스 소개 -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 32px;">
                                <tr>
                                    <td width="33%" align="center" style="padding: 16px; background-color: #f8f9fa; vertical-align: top;">
                                        <div style="font-size: 24px; margin-bottom: 8px;">💕</div>
                                        <div style="font-size: 14px; font-weight: bold; color: #333; margin-bottom: 4px;">추억 공유</div>
                                        <div style="font-size: 12px; color: #666;">가족과 함께 소중한 추억을 나누세요</div>
                                    </td>
                                    <td width="33%" align="center" style="padding: 16px; background-color: #f8f9fa; vertical-align: top;">
                                        <div style="font-size: 24px; margin-bottom: 8px;">🎥</div>
                                        <div style="font-size: 14px; font-weight: bold; color: #333; margin-bottom: 4px;">영상 통화</div>
                                        <div style="font-size: 12px; color: #666;">AI 기술로 고인과 대화할 수 있습니다</div>
                                    </td>
                                    <td width="33%" align="center" style="padding: 16px; background-color: #f8f9fa; vertical-align: top;">
                                        <div style="font-size: 24px; margin-bottom: 8px;">🔒</div>
                                        <div style="font-size: 14px; font-weight: bold; color: #333; margin-bottom: 4px;">안전한 보관</div>
                                        <div style="font-size: 12px; color: #666;">추억을 안전하게 보관하고 관리합니다</div>
                                    </td>
                                </tr>
                            </table>

                            <!-- 도움말 -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                <tr>
                                    <td align="center" style="color: #666; font-size: 14px;">
                                        <p style="margin: 0 0 8px 0;"><strong>초대 링크가 작동하지 않나요?</strong></p>
                                        <p style="margin: 0 0 8px 0;">아래 링크를 복사하여 브라우저에 직접 입력해 주세요:</p>
                                        <div style="background-color: #f8f9fa; padding: 12px; border: 1px solid #dee2e6; font-family: monospace; font-size: 12px; word-break: break-all;">
                                            <span th:text="${inviteLink}">초대 링크</span>
                                        </div>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>

                    <!-- 푸터 -->
                    <tr>
                        <td style="background-color: #f8f9fa; padding: 24px; text-align: center; border-top: 1px solid #e9ecef;">
                            <p style="margin: 0 0 8px 0; font-size: 14px; font-weight: bold;" th:text="${appName}">토마토리멤버</p>
                            <p style="margin: 0; font-size: 12px; color: #6c757d;">
                                이 이메일은 <strong th:text="${inviterName}">초대자</strong>님이 요청하여 발송되었습니다.
                                <br>
                                문의사항이 있으시면 <a href="mailto:support@tomatoremember.com" style="color: #667eea;">support@tomatoremember.com</a>으로 연락주세요.
                            </p>
                        </td>
                    </tr>

                </table>

            </td>
        </tr>
    </table>

</body>
</html>